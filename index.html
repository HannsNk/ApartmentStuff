<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Stuff From My Flat</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css">
  <script src="app.js" defer></script>
</head>
<body>
  <header>
    <h1>Stuff From My Flat</h1>
    <p class="subtitle">
      Moving out soon â€“ friends get first pick ðŸ§¹  
      Message me to claim something. Iâ€™ll mark things as taken once theyâ€™re gone.
    </p>
    <div class="toolbar">
      <input
        id="search"
        class="search-input"
        placeholder="Search by name, room, category..."
      />
      <button class="pill active" data-filter="all">All</button>
      <button class="pill" data-filter="available">Available</button>
      <button class="pill" data-filter="reserved">Reserved</button>
      <button class="pill" data-filter="taken">Taken</button>
    </div>
  </header>

  <main>
    <div id="grid" class="grid"></div>
    <div id="empty" class="empty-state" style="display:none;">
      Nothing matches your search or filter. Try clearing the search box.
    </div>
  </main>

  <script>
    // ðŸ‘‰ Edit this list only. Add/remove items as needed.
    // image: put files in an "images" folder and reference like "images/chair.jpg"
    const items = [
      {
        title: "Example: IKEA dining chair",
        description: "White wooden chair, a few scuffs but sturdy.",
        room: "Living room",
        category: "Furniture",
        status: "available", // "available" | "reserved" | "taken"
        image: "images/dining chair.jpg"
      },
      {
        title: "Example: Set of 4 wine glasses",
        description: "IKEA style, no chips.",
        room: "Kitchen",
        category: "Kitchenware",
        status: "available",
        image: "images/wine glasses.webp"
      },
      {
        title: "Example: Desk lamp",
        description: "Black lamp with warm light bulb.",
        room: "Bedroom",
        category: "Lighting",
        status: "available",
        image: "images/desk lamp.avif"
      }
    ];

    const grid = document.getElementById("grid");
    const searchInput = document.getElementById("search");
    const pills = Array.from(document.querySelectorAll(".pill"));
    const emptyState = document.getElementById("empty");

    let currentFilter = "all";
    let currentSearch = "";

    function render() {
      grid.innerHTML = "";

      const filtered = items.filter((item) => {
        const matchesStatus =
          currentFilter === "all" ? true : item.status === currentFilter;

        const haystack = (
          item.title +
          " " +
          (item.description || "") +
          " " +
          (item.room || "") +
          " " +
          (item.category || "")
        ).toLowerCase();
        const matchesSearch = haystack.includes(currentSearch.toLowerCase());

        return matchesStatus && matchesSearch;
      });

      if (!filtered.length) {
        emptyState.style.display = "block";
        return;
      } else {
        emptyState.style.display = "none";
      }

      for (const item of filtered) {
        const card = document.createElement("article");
        card.className = "card";

        const imgWrapper = document.createElement("div");
        imgWrapper.className = "card-img-wrapper";

        if (item.image) {
          const img = document.createElement("img");
          img.src = item.image;
          img.alt = item.title;
          imgWrapper.appendChild(img);
        }

        const badge = document.createElement("div");
        badge.className = "status-badge " + item.status;
        badge.textContent =
          item.status === "available"
            ? "Available"
            : item.status === "reserved"
            ? "Reserved"
            : "Taken";
        imgWrapper.appendChild(badge);

        const body = document.createElement("div");
        body.className = "card-body";

        const title = document.createElement("div");
        title.className = "card-title";
        title.textContent = item.title;

        const meta = document.createElement("div");
        meta.className = "card-meta";
        meta.textContent = [item.room, item.category]
          .filter(Boolean)
          .join(" Â· ");

        const notes = document.createElement("div");
        notes.className = "card-notes";
        notes.textContent = item.description || "";

        body.appendChild(title);
        if (meta.textContent) body.appendChild(meta);
        if (notes.textContent) body.appendChild(notes);

        card.appendChild(imgWrapper);
        card.appendChild(body);
        grid.appendChild(card);
      }
    }

    // Search + filter handlers
    searchInput.addEventListener("input", (e) => {
      currentSearch = e.target.value;
      render();
    });

    pills.forEach((pill) => {
      pill.addEventListener("click", () => {
        pills.forEach((p) => p.classList.remove("active"));
        pill.classList.add("active");
        currentFilter = pill.getAttribute("data-filter");
        render();
      });
    });

    render();
  </script>
</body>
</html>
